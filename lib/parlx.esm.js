import t from"platform";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var e={axis:"Y",base:window,direction:"vertical",exclude:null,height:"400px",speed:.3,type:"background"},i=function(){function i(t,e,i){var n=this;void 0===e&&(e={}),void 0===i&&(i={}),this.onWindowScroll=function(){n.element&&(n.parallaxEffect(),"function"==typeof n.callbacks.onScroll&&n.callbacks.onScroll(n.element))},this.onWindowResize=function(){n.element&&(n.parallaxEffect(),"function"==typeof n.callbacks.onResize&&n.callbacks.onResize(n.element))},this.element=t,this.settings=this.extendSettings(e),this.callbacks=i,"function"==typeof this.callbacks.onInit&&this.callbacks.onInit(this.element),this.speed=this.settings.speed,this.movement=0,this.transform="",this.scrolled=0,this.parallaxEffect(),this.addEventListeners()}return i.prototype.addEventListeners=function(){this.settings.base.addEventListener("scroll",this.onWindowScroll),window.addEventListener("resize",this.onWindowResize)},i.prototype.removeEventListeners=function(){this.settings.base.removeEventListener("scroll",this.onWindowScroll),window.removeEventListener("resize",this.onWindowResize)},i.prototype.destroy=function(){"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy(this.element),this.removeEventListeners(),this.element.parlx=null,delete this.element.parlx,this.element=null},i.prototype.transforms=function(){var t=0,e=0;"horizontal"===this.settings.direction?(t=this.movement,e=0):"vertical"===this.settings.direction?(t=0,e=this.movement):"diagonal"===this.settings.direction&&(t=this.movement,e=this.movement),this.transform="translate("+t+"px, "+e+"px)"},i.prototype.updateScrolled=function(){var t,e,i,n=this.settings.axis.toLowerCase();t=this.settings.base,e=n,i=!1,t instanceof Window?"y"===e?i=t.pageYOffset>=0&&t.pageYOffset+t.innerHeight<=document.documentElement.scrollHeight:"x"===e&&(i=t.pageXOffset>=0&&t.pageXOffset+t.innerWidth<=document.documentElement.scrollWidth):"y"===e?i=t.scrollTop>=0&&t.scrollTop+t.offsetHeight>=document.documentElement.scrollHeight:"x"===e&&(i=t.scrollLeft>=0&&t.scrollLeft+t.offsetWidth>=document.documentElement.scrollWidth),i&&(this.scrolled=this.element.getBoundingClientRect()["y"===n?"top":"left"])},i.prototype.updatePosition=function(){if("foreground"===this.settings.type)Object.assign(this.element.style,{transform:this.transform});else if("background"===this.settings.type){var t=this.element.querySelector(".parlx-children");t||((t=document.createElement("div")).classList.add("parlx-children"),this.element.appendChild(t));var e=Math.abs(this.element.offsetHeight*this.speed),i=Math.abs(this.element.offsetWidth*this.speed),n=function(){return window.outerWidth>window.outerHeight};Object.assign(t.style,{minHeight:this.element.offsetHeight+2*(n()?e:i)+"px",minWidth:this.element.offsetWidth+2*(n()?i:e)+"px",transform:this.transform,objectFit:"cover"})}},i.prototype.parallaxEffect=function(){var e,i,n;this.element.style.height=this.settings.height.toString(),this.updateScrolled(),Math.abs(this.speed)>1&&(this.speed=.3),this.movement=this.speed*this.scrolled/2,e=this.settings.exclude,((null===(i=t.name)||void 0===i?void 0:i.match(e))||(null===(n=t.product)||void 0===n?void 0:n.match(e)))&&(this.speed=0),this.transforms(),this.updatePosition();var s={move:this.movement};this.element.dispatchEvent(new CustomEvent("parlxMove",{detail:s}))},i.prototype.extendSettings=function(t){var i,n={};for(i in e)if(i in t)n[i]=t[i];else if(this.element.getAttribute("data-parlx-"+i)){var s=this.element.getAttribute("data-parlx-"+i);try{n[i]=JSON.parse(s)}catch(t){n[i]=s}}else n[i]=e[i];return n},i.init=function(t){void 0===t&&(t={});var e=t.elements,n=t.settings,s=t.callbacks;if(e instanceof Node&&(e=[e]),e instanceof NodeList&&(e=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),s=0;for(e=0;e<i;e++)for(var o=arguments[e],l=0,r=o.length;l<r;l++,s++)n[s]=o[l];return n}(e)),e instanceof Array)for(var o=0,l=e;o<l.length;o++){var r=l[o];if(!("parlx"in r))return r.parlx=new i(r,n,s)}},i}();if("undefined"!=typeof document){window.Parlx=i;var n=document.querySelectorAll("[data-parlx]");n.length&&i.init({elements:n})}window.jQuery&&(window.jQuery.fn.parlx=function(t){return void 0===t&&(t={}),i.init({elements:this,settings:t.settings||{},callbacks:t.callbacks||{}})});export default i;
//# sourceMappingURL=parlx.esm.js.map
